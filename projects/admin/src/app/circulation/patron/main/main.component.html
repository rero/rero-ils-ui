<!--
 RERO ILS UI
 Copyright (C) 2019-2024 RERO

 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU Affero General Public License as published by
 the Free Software Foundation, version 3 of the License.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU Affero General Public License for more details.

 You should have received a copy of the GNU Affero General Public License
 along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->
@if (patron) {
  <div class="col mb-4">
    <admin-circulation-patron-detailed
      [patron]="patron"
      [barcode]="barcode"
      [displayCirculationMessages]="true"
      (clearPatron)="clearPatron()"
    ></admin-circulation-patron-detailed>
  </div>

  <div class="col">
    <p-tabMenu [model]="items" [activeItem]="activeItem" (activeItemChange)="onActiveItemChange($event)">
      <ng-template pTemplate="item" let-item>
        <a pRipple class="p-menuitem-link">
          <span class="mr-2">{{ item.label }}</span>
          @if (item.tag?.statistics && item.tag?.statistics()[item.id] && item.tag?.statistics()[item.id] > 0) {
            <p-tag [severity]="item.tag.severity || 'info'" [value]="item.tag.statistics()[item.id] || 0"/>
          }
        </a>
      </ng-template>
    </p-tabMenu>
    <div class="mt-4">
      <router-outlet></router-outlet>
    </div>
  </div>
  <p-toast>
    <ng-template let-message pTemplate="message">
      <div class="flex flex-column align-items-start" style="flex: 1">
        <div class="font-medium text-lg my-3 text-900">
          {{ message.summary }}
        </div>
        <p [innerHtml]="message.detail"></p>
      </div>
    </ng-template>
  </p-toast>
  <p-confirmDialog />
}
