<!--
  RERO ILS UI
  Copyright (C) 2021-2024 RERO
  Copyright (C) 2021 UCLouvain

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU Affero General Public License as published by
  the Free Software Foundation, version 3 of the License.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  GNU Affero General Public License for more details.

  You should have received a copy of the GNU Affero General Public License
  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->
<p-panel>
  <ng-template pTemplate="header">
    <div class="w-full flex flex-wrap justify-content-between gap-2">
      <h5 translate>Order lines</h5>
      @if (recordPermissions?.update?.can) {
          <p-button
            icon="fa fa-plus-square-o"
            [label]="'Add'|translate"
            outlined
            [routerLink]="['/', 'records', 'acq_order_lines', 'new']"
            [queryParams]="{ order: order.pid }"
          />
      }
    </div>
    </ng-template>

    @defer (when orderLines) {
      @if (orderLines.length > 0) {
        @for (orderLine of orderLines; track orderLine) {
          <div class="pt-2 border-bottom-1 surface-border">
          <admin-order-line [orderLine]="orderLine"
                            [order]="order"
                            [recordPermissions]="recordPermissions"
          />
        </div>
        }
      } @else {
        <div translate>No order lines</div>
      }
    } @placeholder {
      <i class="fa fa-spin fa-spinner"></i>&nbsp;{{ 'Loading in progressâ€¦' | translate }}
    }
</p-panel>
