<!--
  RERO ILS UI
  Copyright (C) 2021-2024 RERO
  Copyright (C) 2021 UCLouvain

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU Affero General Public License as published by
  the Free Software Foundation, version 3 of the License.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  GNU Affero General Public License for more details.

  You should have received a copy of the GNU Affero General Public License
  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->
<p-dropdown
  styleClass="w-full"
  [showClear]="true"
  [options]="accountList"
  [placeholder]="to.placeholder"
  [(ngModel)]="selectedAccount"
  (onChange)="selectAccount($event)"
  [loading]="loading"
>
  <ng-template pTemplate="selectedItem">
    {{ selectedAccount.name }}
  </ng-template>
  <ng-template let-account pTemplate="item">
    <div class="flex">
      <span
        class="flex flex-grow-1"
        [style.padding-left.px]="account.depth * 20"
      >
        {{ account.name }}
      </span>
      @if (account.number) {
      <span class="flex">[{{ account.number }}]</span>
      }
      <span
        class="flex ml-4"
        [class]="{
          'text-success': account.remaining_balance.self > 0,
          'text-muted': account.remaining_balance.self === 0,
          'text-warning': account.remaining_balance.self < 0
        }"
      >
        {{
          account.remaining_balance.self
            | currency : defaultCurrency
        }}
      </span>
    </div>
  </ng-template>
</p-dropdown>
