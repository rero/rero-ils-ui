<!--
  RERO ILS UI
  Copyright (C) 2021-2024 RERO

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU Affero General Public License as published by
  the Free Software Foundation, version 3 of the License.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  GNU Affero General Public License for more details.

  You should have received a copy of the GNU Affero General Public License
  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->

@if (holdings.length > 0) {
  @if (!user.roles.includes('patron')) {
    <p-messages
      [value]="[
        {
          severity: 'warn',
          detail: 'Log in to see request options' | translate
        }
      ]"
      [closable]="false"
      [enableService]="false"
      showTransitionOptions="0ms"
    />
  }
  <p-accordion multiple="true" [activeIndex]="[0]">
    @for (holding of holdings; track holding) {
      <div
        class="my-2 border-1 surface-border border-round"
        public-search-holding
        [holding]="holding"
        [viewcode]="viewcode"
        [attr.id]="holding.metadata.pid | idAttribute : { prefix: 'holding' }"
      ></div>
    }
  </p-accordion>
  @if (isLinkShowMore) {
  <p-button severity="secondary" [text]="true" (onClick)="showMore($event)">
    <div>
      <i class="fa fa-plus-square-o"></i>&nbsp;{{
        "Show more" | translate
      }}&nbsp;<small>({{ hiddenHoldings }})</small>
    </div>
  </p-button>
  }
  @if(viewcode === 'global') {
    <a
      class="p-button  p-button-outlined"
      href="/{{ viewcode }}/ill_requests/new?record_pid={{ documentPid }}"
      ><i class="fa fa-truck"></i>&nbsp;{{ 'Interlibrary loan' | translate }}</a
    >
  }
}
