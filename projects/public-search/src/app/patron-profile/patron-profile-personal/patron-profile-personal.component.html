<!--
  RERO ILS UI
  Copyright (C) 2021 RERO

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU Affero General Public License as published by
  the Free Software Foundation, version 3 of the License.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  GNU Affero General Public License for more details.

  You should have received a copy of the GNU Affero General Public License
  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->
<section id="personal-section" class="row px-3 mt-2 my-1">
  <div class="col mr-1 d-none d-lg-block">
    <div class="row p-2 bg-dark rounded text-light">
      <div class="col-lg-12 pl-0" translate>Personal details</div>
    </div>
  </div>
</section>

<section id="personal-data" class="row px-3 mt-2">
  <dl class="container row">
    <!-- GENDER -->
    <ng-container *ngIf="record.gender">
      <dt class="col-2 label-title" translate>
        Gender
      </dt>
      <dd class="col-10">
        {{ record.gender }}
      </dd>
    </ng-container>
    <!-- USERNAME -->
    <ng-container *ngIf="record.username">
      <dt class="col-2 label-title" translate>
        Username
      </dt>
      <dd class="col-10">
        {{ record.username }}
      </dd>
    </ng-container>
    <!-- PRIMARY ADDRESS -->
    <ng-container *ngIf="record.street || record.city || record.country">
      <dt class="col-2 label-title" translate>
        Primary address
      </dt>
      <dd class="col-10">
        <ng-container *ngIf="record.street">
          {{ record.street }}<br>
        </ng-container>
        <ng-container *ngIf="record.city">
          {{ record.postal_code }} {{ record.city }}<br>
        </ng-container>
        <ng-container *ngIf="record.country">
          {{ record.country | translate }}
        </ng-container>
      </dd>
    </ng-container>
    <!-- SECONDARY ADDRESS -->
    <ng-container *ngIf="record.second_address">
      <dt class="col-2 label-title" translate>
        Secondary address
      </dt>
      <dd class="col-10">
        <ng-container *ngIf="record.second_address.street">
          {{ record.second_address.street }}<br>
        </ng-container>
        <ng-container *ngIf="record.second_address.city">
          {{ record.second_address.postal_code }} {{ record.second_address.city }}<br>
        </ng-container>
        <ng-container *ngIf="record.second_address.country">
          {{ record.country | translate }}
        </ng-container>
      </dd>
    </ng-container>

    <!-- HOME PHONE -->
    <ng-container *ngIf="record.home_phone">
      <dt class="col-2 label-title" translate>
        Home phone
      </dt>
      <dd class="col-10">
        {{ record.home_phone }}
      </dd>
    </ng-container>
    <!-- BUSINESS PHONE -->
    <ng-container *ngIf="record.business_phone">
      <dt class="col-2 label-title" translate>
        Home phone
      </dt>
      <dd class="col-10">
        {{ record.business_phone }}
      </dd>
    </ng-container>
    <!-- MOBILE PHONE -->
    <ng-container *ngIf="record.mobile_phone">
      <dt class="col-2 label-title" translate>
        Home phone
      </dt>
      <dd class="col-10">
        {{ record.mobile_phone }}
      </dd>
    </ng-container>
    <!-- OTHER PHONE -->
    <ng-container *ngIf="record.other_phone">
      <dt class="col-2 label-title" translate>
        Home phone
      </dt>
      <dd class="col-10">
        {{ record.other_phone }}
      </dd>
    </ng-container>
    <!-- EMAIL -->
    <ng-container *ngIf="record.email">
      <dt class="col-2 label-title" translate>
        Email
      </dt>
      <dd class="col-10">
        {{ record.email }}
      </dd>
    </ng-container>
    <!-- PATRON BARCODE -->
    <ng-container *ngIf="record.patron.barcode">
      <dt class="col-2 label-title" translate>
        Patron number
      </dt>
      <dd class="col-10">
        <ul class="list-unstyled mb-0">
          <li *ngFor="let barcode of record.patron.barcode; let last = last">
            {{ barcode }}
            <ng-container *ngIf="!last">;</ng-container>
          </li>
        </ul>
      </dd>
    </ng-container>
    <!-- PATRON BARCODE -->
    <ng-container *ngIf="record.patron.expiration_date">
      <dt class="col-2 label-title" translate>
        Account expiration
      </dt>
      <dd class="col-10">
        {{ record.patron.expiration_date | dateTranslate: 'shortDate' }}
      </dd>
    </ng-container>
    <!-- KEEP HISTORY -->
    <dt class="col-2 label-title" translate>
        Keep history
      </dt>
      <dd class="col-10">
        <i class="fa fa-circle" [ngClass]="{'text-success': record.patron.keep_history, 'text-danger': !record.patron.keep_history}"></i>
        <ng-container *ngIf="!record.patron.keep_history; else keep">
          {{ 'The loan history is not saved.' | translate }}
        </ng-container>
        <ng-template #keep>
          {{ 'The loan history is saved for a maximum of six months. It is visible to you and the library staff.' | translate }}
        </ng-template>
      </dd>
  </dl>

  <div class="col-12 mt-3 pl-3">
    <a id="profile-edit" class="btn btn-sm btn-primary" href="/account/settings/profile/" translate>Edit</a>
  </div>
</section>
