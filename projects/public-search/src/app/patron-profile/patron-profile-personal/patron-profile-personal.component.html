<!--
  RERO ILS UI
  Copyright (C) 2021-2024 RERO

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU Affero General Public License as published by
  the Free Software Foundation, version 3 of the License.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  GNU Affero General Public License for more details.

  You should have received a copy of the GNU Affero General Public License
  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->
<section class="ui:mt-2">
  <h4 translate>Personal details</h4>
  <dl class="metadata">
    <!-- GENDER -->
    @if (user.gender) {
      <dt translate>Gender</dt>
      <dd>{{ user.gender | translate }}</dd>
    }
    <!-- USERNAME -->
    @if (user.username) {
      <dt translate>Username</dt>
      <dd>{{ user.username }}</dd>
    }
    <!-- PRIMARY ADDRESS -->
    @if (user.street || user.city || user.country) {
      <dt translate>Primary address</dt>
      <dd>
        @if (user.street) {
          {{ user.street }}<br>
        }
        @if (user.city) {
          {{ user.postal_code }} {{ user.city }}<br>
        }
        @if (user.country) {
          {{ ('country_' + user.country) | translate }}
        }
      </dd>
    }
    <!-- SECONDARY ADDRESS -->
    @if (patron.second_address) {
      <dt translate>Secondary address</dt>
      <dd>
        @if (patron.second_address.street) {
          {{ patron.second_address.street }}<br>
        }
        @if (patron.second_address.city) {
          {{ patron.second_address.postal_code }} {{ patron.second_address.city }}<br>
        }
        @if (patron.second_address.country) {
          {{ ('country_' + patron.second_address.country) | translate }}
        }
      </dd>
    }
    <!-- HOME PHONE -->
    @if (user.home_phone) {
      <dt translate>Home phone</dt>
      <dd>{{ user.home_phone }}</dd>
    }
    <!-- BUSINESS PHONE -->
    @if (user.business_phone) {
      <dt translate>Business phone</dt>
      <dd>{{ user.business_phone }}</dd>
    }
    <!-- MOBILE PHONE -->
    @if (user.mobile_phone) {
      <dt translate>Mobile phone</dt>
      <dd>{{ user.mobile_phone }}</dd>
    }
    <!-- OTHER PHONE -->
    @if (user.other_phone) {
      <dt translate>Other phone</dt>
      <dd>{{ user.other_phone }}</dd>
    }
    <!-- EMAIL -->
    @if (user.email) {
      <dt translate>Email</dt>
      <dd>{{ user.email }}</dd>
    }
    <!-- PATRON BARCODE -->
    @if (patron.patron.barcode) {
      <dt translate>Patron number</dt>
      <dd>{{ patron.patron.barcode | join : ', ' }}</dd>
    }
    <!-- PATRON BARCODE -->
    @if (patron.patron.expiration_date) {
      <dt translate>Account expiration</dt>
      <dd>{{ patron.patron.expiration_date | dateTranslate: 'shortDate' }}</dd>
    }
    <!-- KEEP HISTORY -->
    <dt translate>Keep history</dt>
    <dd>
      <i class="fa fa-circle" [ngClass]="{'text-success': user.keep_history, 'text-danger': !user.keep_history}"></i>
      @if (user.keep_history) {
        {{ 'The loan history is saved for a maximum of six months. It is visible to you and the library staff.' | translate }}
      } @else {
        {{ 'The loan history is not saved.' | translate }}
      }
    </dd>
  </dl>
  @if (disabledButtonOnReadyOnly) {
    <div class="ui:flex ui:gap-2 ui:mt-4">
      <p-button size="small" [label]="'Edit'|translate" [routerLink]="['user', 'edit' ]" />
      <p-button size="small" [label]="'Change my password'|translate" [routerLink]="['password', 'edit']" />
    </div>
  }
</section>
